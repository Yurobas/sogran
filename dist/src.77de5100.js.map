{"version":3,"sources":["js/preloader.ts","js/slider.ts","index.ts"],"names":[],"mappings":"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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["\r\nconst anim = async (duration, cb: (progress: number) => boolean): Promise<void> => {\r\n  const start = performance.now()\r\n  \r\n  return new Promise(() => {\r\n    const fn = (now = performance.now()) => {\r\n      const progress = Math.min(now / (start + duration), 1)\r\n      \r\n\r\n      cb(progress) && progress != 1 && requestAnimationFrame(fn)\r\n    }\r\n\r\n\r\n    requestAnimationFrame(fn)\r\n  })\r\n}\r\n\r\nexport default async function () :Promise<void> {\r\n\r\n  const delay = 1500\r\n  \r\n  let isLoaded: boolean\r\n  \r\n  const loaded = new Promise(res => {\r\n    window.addEventListener('load', res)\r\n  })\r\n  loaded.then(() => isLoaded = true)\r\n\r\n  \r\n  let progress\r\n  const status = anim(delay, progress => {\r\n    if (isLoaded) return false\r\n\r\n    setData(97 * progress)\r\n    \r\n    return true\r\n  })\r\n\r\n  await Promise.race([status, loaded])\r\n\r\n  setData(100)\r\n\r\n\r\n}\r\n\r\nlet lastProgress = 0\r\nlet timeout\r\nasync function setData(progress){\r\n  const diff =  progress - lastProgress\r\n  if (progress - lastProgress > 10) {\r\n    let current = diff/2 + lastProgress\r\n    \r\n    lastProgress = current\r\n    render(lastProgress)\r\n    await wait(500, () => setData(progress))\r\n  }\r\n\r\n  if (lastProgress > progress) {\r\n    return \r\n  }\r\n\r\n  lastProgress = progress\r\n  render(lastProgress)\r\n}\r\n\r\nfunction render(progress){\r\n  console.log(progress)\r\n}\r\n\r\nfunction wait(time, cb?){\r\n  return new Promise<void>(res => {\r\n    clearInterval(timeout)\r\n    timeout = setTimeout(() => (cb(), res()), time)\r\n  })\r\n}\r\n","export default class Slider {\r\n  container: HTMLElement;\r\n  slides: Array<HTMLElement>;\r\n  sliderWidth: number;\r\n  touchId: number = null;\r\n  coordStart: number = 0;\r\n  coordCurrent: number = 0;\r\n  nextSlide: number = 0;\r\n  activeSlide: number = 0;\r\n  isDragable: boolean;\r\n\r\n  constructor(el: string) {\r\n    this.container = document.querySelector(el);\r\n    this.sliderWidth = this.container.getBoundingClientRect().width;\r\n    this.slides = [...(this.container.querySelectorAll('.slider__item') as NodeListOf<HTMLElement>)];\r\n\r\n    this.listeners();\r\n    this.touchListeners();\r\n  }\r\n\r\n  listeners() {\r\n    this.container.addEventListener('mousedown', event => {\r\n      this.isDragable = true;\r\n    });\r\n\r\n    document.addEventListener('mousemove', event => {\r\n      if (!this.isDragable) return;\r\n    });\r\n\r\n    document.addEventListener('mouseup', event => {\r\n      this.isDragable = false;\r\n    });\r\n  }\r\n\r\n  touchListeners() {\r\n    this.container.addEventListener('touchstart', event => {\r\n      if (this.touchId) return;\r\n\r\n      const {pageX, identifier} =  event.changedTouches[0];\r\n      this.coordStart = pageX;\r\n      this.touchId = identifier;\r\n\r\n      this.isDragable = true;\r\n      console.log('start: ', event);\r\n    });\r\n\r\n    document.addEventListener('touchmove', event => {\r\n      if (!this.isDragable) return;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n      const translate = (this.coordStart - this.coordCurrent) / this.sliderWidth * 100;\r\n\r\n      if (translate > 0) {\r\n        this.imageMove(translate);\r\n      } else {\r\n        this.imageMove(translate);\r\n      }\r\n\r\n      console.log('move: ', event);\r\n    });\r\n\r\n    document.addEventListener('touchend', event => {\r\n      this.isDragable = false;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n      this.goTo();\r\n      \r\n      let id = event.changedTouches[0].identifier;\r\n      if (this.touchId !== id) return;\r\n\r\n      this.coordStart = 0;\r\n      this.coordCurrent = 0;\r\n\r\n      console.log('end: ', event);\r\n    });\r\n  }\r\n\r\n  findActiveTouch(arr: TouchList) {\r\n    const items = [...arr];\r\n    const { touchId } = this;\r\n    const item = items.find(item => touchId === item.identifier);\r\n    return item;\r\n  }\r\n\r\n  goTo() {\r\n\r\n  }\r\n\r\n  imageMove(translate: number) {\r\n    const { slides } = this;\r\n\r\n    if (translate > 0) {\r\n      this.nextSlide = Math.max(this.activeSlide - 1, 0);\r\n    } else {\r\n      this.nextSlide = Math.min(this.activeSlide + 1, slides.length);\r\n    }\r\n\r\n    const { nextSlide } = this;\r\n    slides[nextSlide].style.transform = `translate3d(${translate}%, 0, 0)`;\r\n  }\r\n\r\n\r\n}","import preloader from './js/preloader'\r\nimport Slider from './js/slider'\r\n\r\nnew Slider('.slider__container');\r\n\r\npreloader()\r\n    .then(() => {\r\n      console.log('done');\r\n      \r\n    })"]}