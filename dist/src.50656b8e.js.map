{"version":3,"sources":["js/preloader.ts","js/slider.ts","index.ts"],"names":[],"mappings":"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","file":"src.50656b8e.js","sourceRoot":"..\\src","sourcesContent":["\r\nconst anim = async (duration, cb: (progress: number) => boolean): Promise<void> => {\r\n  const start = performance.now()\r\n  \r\n  return new Promise(() => {\r\n    const fn = (now = performance.now()) => {\r\n      const progress = Math.min(now / (start + duration), 1)\r\n      \r\n\r\n      cb(progress) && progress != 1 && requestAnimationFrame(fn)\r\n    }\r\n\r\n\r\n    requestAnimationFrame(fn)\r\n  })\r\n}\r\n\r\nexport default async function () :Promise<void> {\r\n\r\n  const delay = 1500\r\n  \r\n  let isLoaded: boolean\r\n  \r\n  const loaded = new Promise(res => {\r\n    window.addEventListener('load', res)\r\n  })\r\n  loaded.then(() => isLoaded = true)\r\n\r\n  \r\n  let progress\r\n  const status = anim(delay, progress => {\r\n    if (isLoaded) return false\r\n\r\n    setData(97 * progress)\r\n    \r\n    return true\r\n  })\r\n\r\n  await Promise.race([status, loaded])\r\n\r\n  setData(100)\r\n\r\n\r\n}\r\n\r\nlet lastProgress = 0\r\nlet timeout\r\nasync function setData(progress){\r\n  const diff =  progress - lastProgress\r\n  if (progress - lastProgress > 10) {\r\n    let current = diff/2 + lastProgress\r\n    \r\n    lastProgress = current\r\n    render(lastProgress)\r\n    await wait(500, () => setData(progress))\r\n  }\r\n\r\n  if (lastProgress > progress) {\r\n    return \r\n  }\r\n\r\n  lastProgress = progress\r\n  render(lastProgress)\r\n}\r\n\r\nfunction render(progress){\r\n  console.log(progress)\r\n}\r\n\r\nfunction wait(time, cb?){\r\n  return new Promise<void>(res => {\r\n    clearInterval(timeout)\r\n    timeout = setTimeout(() => (cb(), res()), time)\r\n  })\r\n}\r\n","export default class Slider {\r\n  container: HTMLElement;\r\n  slides: Array<HTMLElement>;\r\n  sliderWidth: number;\r\n  touchId: number = null;\r\n  coordStart: number = 0;\r\n  coordCurrent: number = 0;\r\n  nextSlide: number = 0;\r\n  activeSlide: number = 0;\r\n  isDragable: boolean;\r\n\r\n  constructor(el: string) {\r\n    this.container = document.querySelector(el);\r\n    this.sliderWidth = this.container.getBoundingClientRect().width;\r\n    this.slides = [...(this.container.querySelectorAll('.slider__item') as NodeListOf<HTMLElement>)];\r\n\r\n    this.listeners();\r\n    this.touchListeners();\r\n  }\r\n\r\n  listeners() {\r\n    this.container.addEventListener('mousedown', event => {\r\n      this.isDragable = true;\r\n    });\r\n\r\n    document.addEventListener('mousemove', event => {\r\n      if (!this.isDragable) return;\r\n    });\r\n\r\n    document.addEventListener('mouseup', event => {\r\n      this.isDragable = false;\r\n    });\r\n  }\r\n\r\n  touchListeners() {\r\n    this.container.addEventListener('touchstart', event => {\r\n      if (this.touchId) return;\r\n\r\n      const {pageX, identifier} =  event.changedTouches[0];\r\n      this.coordStart = pageX;\r\n      this.touchId = identifier;\r\n\r\n      this.isDragable = true;\r\n      console.log('start: ', event);\r\n    });\r\n\r\n    document.addEventListener('touchmove', event => {\r\n      if (!this.isDragable) return;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n      const translate = (this.coordStart - this.coordCurrent) / this.sliderWidth * 100;\r\n\r\n      if (translate > 0) {\r\n        this.imageMove(translate);\r\n      } else {\r\n        this.imageMove(translate);\r\n      }\r\n\r\n      console.log('move: ', event);\r\n    });\r\n\r\n    document.addEventListener('touchend', event => {\r\n      this.isDragable = false;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n      this.goTo();\r\n      \r\n      let id = event.changedTouches[0].identifier;\r\n      if (this.touchId !== id) return;\r\n\r\n      this.coordStart = 0;\r\n      this.coordCurrent = 0;\r\n\r\n      console.log('end: ', event);\r\n    });\r\n  }\r\n\r\n  findActiveTouch(arr: TouchList) {\r\n    const items = [...arr];\r\n    const { touchId } = this;\r\n    const item = items.find(item => touchId === item.identifier);\r\n    return item;\r\n  }\r\n\r\n  goTo() {\r\n\r\n  }\r\n\r\n  imageMove(translate: number) {\r\n    const { slides } = this;\r\n\r\n    if (translate > 0) {\r\n      this.nextSlide = Math.max(this.activeSlide - 1, 0);\r\n    } else {\r\n      this.nextSlide = Math.min(this.activeSlide + 1, slides.length);\r\n    }\r\n\r\n    const { nextSlide } = this;\r\n    slides[nextSlide].style.transform = `translate3d(${translate}%, 0, 0)`;\r\n  }\r\n\r\n\r\n}","import preloader from './js/preloader'\r\nimport Slider from './js/slider'\r\n\r\nnew Slider('.slider__container');\r\n\r\npreloader()\r\n    .then(() => {\r\n      console.log('done');\r\n      \r\n    })"]}