{"version":3,"sources":["js/preloader.ts","js/slider.ts","js/animateBlocks.ts","js/globalListeners.js","js/pop.ts","index.ts"],"names":["listeners","clickOutside","target","ignoreEls","callback","Function","arr","push","indexOf","splice","globalThis","addEventListener","event","isClickInside","el","path","includes","document","body","contains","forEach","item","cb","some","keyListeners","keyupEsc","which","code","key","keyCode"],"mappings":"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","file":"src.a1e83ca4.js","sourceRoot":"..\\src","sourcesContent":["\r\nconst anim = async (duration, cb: (progress: number) => boolean): Promise<void> => {\r\n  const start = performance.now()\r\n  \r\n  return new Promise(() => {\r\n    const fn = (now = performance.now()) => {\r\n      const progress = Math.min(now / (start + duration), 1)\r\n      \r\n\r\n      cb(progress) && progress != 1 && requestAnimationFrame(fn)\r\n    }\r\n\r\n\r\n    requestAnimationFrame(fn)\r\n  })\r\n}\r\n\r\nexport default async function () :Promise<void> {\r\n\r\n  const delay = 1500\r\n  \r\n  let isLoaded: boolean\r\n  \r\n  const loaded = new Promise(res => {\r\n    window.addEventListener('load', res)\r\n  })\r\n  loaded.then(() => isLoaded = true)\r\n\r\n  const status = anim(delay, progress => {\r\n    if (isLoaded) return false\r\n\r\n    setData(97 * progress)\r\n    \r\n    return true\r\n  })\r\n\r\n  await Promise.race([status, loaded])\r\n\r\n  await setData(100)\r\n\r\n  document.querySelector('.preloader').classList.add('--off')\r\n}\r\n\r\nlet lastProgress = 0\r\nlet timeout\r\nasync function setData(progress){\r\n  const diff =  progress - lastProgress\r\n  if (progress - lastProgress > 10) {\r\n    let current = diff/2 + lastProgress\r\n    \r\n    lastProgress = current\r\n    render(lastProgress)\r\n    await wait(500, () => setData(progress))\r\n  }\r\n\r\n  if (lastProgress > progress) {\r\n    return \r\n  }\r\n\r\n  lastProgress = progress\r\n  render(lastProgress)\r\n}\r\n\r\nfunction render(progress){\r\n  progress |= progress\r\n  document.querySelector('.preloader__value').innerHTML = progress.toString().padStart(3, '0')\r\n}\r\n\r\nfunction wait(time, cb?){\r\n  return new Promise<void>(res => {\r\n    clearInterval(timeout)\r\n    timeout = setTimeout(() => (cb(), res()), time)\r\n  })\r\n}\r\n","export default class Slider {\r\n  container: HTMLElement;\r\n  slides: Array<HTMLElement>;\r\n  sliderWidth: number;\r\n  _touchId: number = null;\r\n  coordStart: number = 0;\r\n  nextSlide: number = 0;\r\n  prevSlide: number = 0;\r\n  activeSlide: number = 0;\r\n  isDragable: boolean;\r\n  _pr: number;\r\n\r\n  constructor(el: string) {\r\n    this.container = document.querySelector(el);\r\n    this.sliderWidth = this.container.getBoundingClientRect().width;\r\n    this.slides = [...(this.container.querySelectorAll('.slider__item') as NodeListOf<HTMLElement>)];\r\n\r\n    this.listeners();\r\n    this.touchListeners();\r\n  }\r\n\r\n  set coordCurrent(val: number){\r\n    this.progress = (this.coordStart - val) / this.sliderWidth;\r\n  }\r\n\r\n  set progress(val){\r\n    this._pr = -val\r\n\r\n    this.move()\r\n  }\r\n  get progress(){\r\n    return this._pr\r\n  }\r\n\r\n  listeners() {\r\n    this.container.addEventListener('mousedown', event => {\r\n      this.isDragable = true;\r\n    });\r\n\r\n    document.addEventListener('mousemove', event => {\r\n      if (!this.isDragable) return;\r\n    });\r\n\r\n    document.addEventListener('mouseup', event => {\r\n      this.isDragable = false;\r\n    });\r\n  }\r\n\r\n  touchListeners() {\r\n    this.container.addEventListener('touchstart', event => {\r\n      if (this._touchId) return;\r\n      this.disableTransition()\r\n\r\n      const {pageX, identifier} =  event.changedTouches[0];\r\n      this.coordStart = pageX;\r\n      this.coordCurrent = pageX;\r\n      this._touchId = identifier;\r\n\r\n      this.isDragable = true;\r\n      console.log('start: ', event);\r\n    });\r\n\r\n    document.addEventListener('touchmove', event => {\r\n      if (!this.isDragable) return;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n    });\r\n\r\n    document.addEventListener('touchend', event => {\r\n      this.isDragable = false;\r\n\r\n      const item = this.findActiveTouch(event.changedTouches);\r\n      if (!item) return;\r\n\r\n      const { pageX } = item;\r\n      this.coordCurrent = pageX;\r\n\r\n      this.goTo(3);\r\n\r\n      console.log('end: ', event);\r\n    });\r\n  }\r\n\r\n  disableTransition(){\r\n\r\n  }\r\n\r\n  enableTransition(){\r\n\r\n  }\r\n\r\n  findActiveTouch(arr: TouchList) {\r\n    const items = [...arr];\r\n    const { _touchId } = this;\r\n    const item = items.find(item => _touchId === item.identifier);\r\n    return item;\r\n  }\r\n\r\n  goTo(slide: number) {\r\n    this.nextSlide = slide\r\n    const {\r\n      slides,\r\n    } = this\r\n    this.enableTransition()\r\n\r\n    // switch(direction) {\r\n    //   case -1: \r\n    //     slides[slide].classList.add('left')\r\n    //   default:\r\n    //     slides[slide].classList.add('right')\r\n    // }\r\n    \r\n    // requestAnimationFrame(() => requestAnimationFrame(() => {\r\n    //   this.slides.forEach((item, index) => {\r\n    //     switch(true) {\r\n    //       case i < slide:\r\n    //         item.style.transform = `translateX(${-100}%)`\r\n    //         break\r\n    //       case slide:\r\n    //         item.style.transform = `translateX(${0}%)`\r\n    //         break\r\n    //       case slide + 1:\r\n    //         item.style.transform = `translateX(${100}%)`\r\n    //         break\r\n    //       default\r\n    //     }\r\n    //   })\r\n    // }))\r\n  }\r\n\r\n  move() {\r\n    const { \r\n      slides,\r\n      progress,\r\n      activeSlide,\r\n    } = this;\r\n    console.log(progress);\r\n    \r\n    \r\n    if (progress > 0) {\r\n      this.nextSlide = Math.max(activeSlide - 1, 0);\r\n      this.prevSlide = Math.min(activeSlide + 1, slides.length);\r\n    } else {\r\n      this.nextSlide = Math.min(activeSlide + 1, slides.length);\r\n      this.prevSlide = Math.max(activeSlide - 1, 0);\r\n    }\r\n\r\n    const { nextSlide, prevSlide } = this;\r\n\r\n    slides[nextSlide].style.transform = `translate3d(${nextSlide === activeSlide ? progress * 100 * .3: progress * 100}%, 0, 0)`;\r\n    slides[prevSlide].style.transform = ``;\r\n  }\r\n\r\n\r\n}","export default () => {\r\n  [...document.querySelectorAll('.animate')]\r\n    .forEach(item => {\r\n      \r\n      const observer = new IntersectionObserver((entries) => {\r\n        entries.forEach(entry => {\r\n          if (entry.isIntersecting) {\r\n            entry.target.classList.add('--animated')\r\n          }\r\n        })\r\n      }, {\r\n        root: null,\r\n        rootMargin: '0px',\r\n        threshold: .5\r\n      })\r\n\r\n      observer.observe(item)\r\n    })\r\n}","\r\nconst listeners = []\r\n\r\nglobalThis.addEventListener('click', event => {\r\n\r\n  function isClickInside(event, el){\r\n    if (el instanceof Function) {\r\n      el = el()\r\n    }\r\n\r\n    if (!el) {\r\n      return\r\n    }\r\n\r\n    if (event.path) {\r\n      return event.path.includes(el)\r\n    }\r\n\r\n    if (document.body.contains(event.target)) {\r\n      return el.contains(event.target)\r\n    }\r\n    \r\n    return true \r\n  }\r\n\r\n  listeners.forEach(([item, ignoreEls, cb]) => {\r\n    // 2 проверки, 1 надежная, 2 резервный план\r\n    // если 1 метод не работает то он возвращает тру чтоб пошло ко 2\r\n    \r\n    if (isClickInside(event, item)) {\r\n      return\r\n    }\r\n\r\n    const isAllInside = ignoreEls.some(el => isClickInside(event, el)) ?? true\r\n\r\n    if (isAllInside) {\r\n      return\r\n    }\r\n\r\n    cb(event, item)\r\n  })\r\n})\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} target Элемент\r\n * @param {Array<HTMLElement|Function>} ignoreEls Массив элементов снаружи таргета, клик по которым тоже возможен, можно передать функцию которая вернет элемент\r\n * @param {Function} [callback] Коллбек после клика снаружи\r\n * @returns {Function} Функция удаления обработчика\r\n */\r\nexport function clickOutside(target, ignoreEls, callback) {\r\n  if (ignoreEls instanceof Function) {\r\n    callback = ignoreEls\r\n    ignoreEls = []\r\n  }\r\n  const arr = [target, ignoreEls, callback];\r\n  listeners.push(arr)\r\n\r\n  return () => {\r\n    const index = listeners.indexOf(arr)\r\n    if (!~index) {\r\n      // если не нашло\r\n      return\r\n    }\r\n    listeners.splice(\r\n      listeners.indexOf(arr),\r\n      1\r\n    )\r\n  }\r\n}\r\n\r\nconst keyListeners = []\r\n\r\nglobalThis.addEventListener('keyup', event => {\r\n\r\n  keyListeners.forEach(([cb]) => {\r\n    cb(event)\r\n  })\r\n})\r\n\r\nexport function keyupEsc(callback) {\r\n  const arr = [\r\n    (event) => {\r\n      const {\r\n        which,\r\n        code,\r\n        key,\r\n        keyCode,\r\n      } = event\r\n      \r\n      if (which === 27 || keyCode === 27 || code === 'Escape' || key === 'Escape') {\r\n        return callback(event)\r\n      }\r\n    }\r\n  ];\r\n  keyListeners.push(arr)\r\n\r\n  return () => {\r\n    const index = keyListeners.indexOf(arr)\r\n    if (!~index) {\r\n      // если не нашло\r\n      return\r\n    }\r\n    keyListeners.splice(\r\n      keyListeners.indexOf(arr),\r\n      1\r\n    )\r\n  }\r\n}","import {clickOutside} from './globalListeners'\r\n\r\nexport function productTooltipInit() {\r\n  const items = document.querySelectorAll('.productTooltip')\r\n\r\n  const classes = ['--left', '--right']\r\n\r\n  items.forEach((item) => {\r\n    // @ts-ignore\r\n    clickOutside(item, () => {\r\n      (item as HTMLElement).classList.remove('--active')\r\n    })\r\n    item\r\n      .querySelector('.productTooltip__icon')\r\n      .addEventListener('click', event => {\r\n        const node = event.currentTarget as HTMLElement\r\n\r\n        const block = item.querySelector('.productTooltip__info') as HTMLElement\r\n        if (!item.classList.contains('--active')) {\r\n          Object.assign(block.style, {\r\n            opacity: 0,\r\n            transition: 'none',\r\n          })\r\n          item.classList.add('--active')\r\n  \r\n          const {\r\n            right,\r\n            left,\r\n            width,\r\n          } = block.getBoundingClientRect()\r\n\r\n          const {\r\n            documentElement: {\r\n              clientWidth\r\n            }\r\n          } = document\r\n          \r\n          if (clientWidth - right < 30) {\r\n            item.classList.remove('--right')\r\n            item.classList.add('--left')\r\n          } else if (left < 30) {\r\n            item.classList.add('--right')\r\n            item.classList.remove('--left')\r\n          }\r\n\r\n          item.classList.remove('--active')\r\n        }\r\n        \r\n        requestAnimationFrame(() => requestAnimationFrame(() => {\r\n          Object.assign(block.style, {\r\n            opacity: '',\r\n            transition: '',\r\n          })\r\n          item.classList.toggle('--active')\r\n        }))\r\n\r\n      })\r\n  })\r\n}","import preloader from './js/preloader'\r\nimport Slider from './js/slider'\r\nimport initAnimations from './js/animateBlocks'\r\n\r\nnew Slider('.slider__container');\r\nimport { productTooltipInit } from './js/pop'\r\n\r\nproductTooltipInit()\r\n\r\npreloader()\r\n    .then(() => {\r\n        initAnimations()\r\n    })"]}